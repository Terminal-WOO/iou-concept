# IOU Concept - Testdata Documentatie

Complete testdata voor alle sectoren van de Informatie Ondersteunde Werkomgeving.

## üìä Overzicht Testdata

### Organisaties (5)
- **Provincie Flevoland** (hoofdorganisatie)
- Gemeente Almere
- Gemeente Lelystad
- Waterschap Zuiderzeeland
- Ministerie van Infrastructuur en Waterstaat

### Gebruikers (8)

| Naam | Email | Afdeling | Rol(len) |
|------|-------|----------|----------|
| Maria Jansen | maria.jansen@flevoland.nl | Economie & Duurzaamheid | Beleidsmedewerker, Projectleider |
| Jan Bakker | jan.bakker@flevoland.nl | Juridische Zaken | Juridisch Adviseur |
| Sophie de Vries | sophie.devries@flevoland.nl | ICT & Digitalisering | Data Analist |
| Peter van den Berg | peter.vandenberg@flevoland.nl | Mobiliteit & Bereikbaarheid | Projectleider |
| Lisa Vermeulen | lisa.vermeulen@flevoland.nl | Ruimte & Leefomgeving | - |
| Tom Hendriks | tom.hendriks@almere.nl | Stadsontwikkeling | - |
| Anna de Jong | anna.dejong@almere.nl | Vergunningen & Handhaving | Vergunningverlener |
| Mark Peters | mark.peters@lelystad.nl | Haven & Logistiek | - |

### Informatiedomeinen

#### Projecten (4)
1. **Circulaire Economie Flevoland 2025**
   - Budget: ‚Ç¨2.500.000
   - Fase: Definitie
   - Eigenaar: Maria Jansen
   - Tags: circulair, duurzaamheid, innovatie

2. **Digitale Transformatie Provincie**
   - Budget: ‚Ç¨1.800.000
   - Fase: Ontwerp
   - Eigenaar: Sophie de Vries

3. **Windpark Flevopolder Zuid**
   - Budget: ‚Ç¨75.000.000
   - Fase: Realisatie
   - Eigenaar: Peter van den Berg

4. **Smart Mobility Almere**
   - Budget: ‚Ç¨950.000
   - Fase: Initiatief
   - Eigenaar: Tom Hendriks

#### Zaken (5)
1. **Subsidieaanvraag Groene Energie BV** (SUB-2025-0142)
   - Type: Subsidie
   - Bewaartermijn: 7 jaar
   - Woo-klasse: Openbaar
   - Stakeholder: Groene Energie BV (aanvrager)

2. **Omgevingsvergunning Windturbine Dronten** (OMV-2025-0089)
   - Type: Vergunning
   - Bewaartermijn: 10 jaar
   - Woo-klasse: Openbaar
   - Stakeholders: WindPower Nederland BV, Stichting Natuur Flevoland

3. **Bezwaar Afwijzing Bouwvergunning Almere** (BZW-2025-0023)
   - Type: Bezwaar
   - Bewaartermijn: 20 jaar
   - Woo-klasse: Deels openbaar
   - Stakeholder: Familie Smit

4. **Woo-verzoek Windpark Communicatie** (Woo-2025-0008)
   - Type: Woo-verzoek
   - Bewaartermijn: 5 jaar
   - Woo-klasse: Openbaar
   - Stakeholder: Stichting Natuur Flevoland

5. **Woo-verzoek Basiskaart Agrarische Bedrijfssituatie 2021** (Woo-2023-0194)
   - Type: Woo-verzoek (Real-world voorbeeld)
   - Ontvangst: 14-02-2023
   - Besluit: 04-05-2023
   - Publicatie: 07-10-2025
   - Bewaartermijn: Permanent (archiefwaardig)
   - Woo-klasse: Actief openbaar gemaakt
   - UUID: 140b872e-26a2-433e-96d5-3d74f7fa981d
   - Stakeholders:
     - Ministerie van LNV (verantwoordelijk)
     - Rijksdienst voor Ondernemend Nederland (uitvoerend)
     - NRC, Follow the Money, Omroep Gelderland (verzoekers)
     - Agrarische sector (derde-belanghebbenden)
   - Dataset: Basiskaart Agrarische Bedrijfssituatie 2021 (XLSX, 3.8 MB, >12.000 bedrijven)
   - Onderwerpen: Landbouw, Diergezondheid, Dierenwelzijn, Veehouderij
   - URL: https://www.rijksoverheid.nl/documenten/publicaties/2025/10/07/openbaargemaakt-document-bij-besluit-woo-verzoek-over-basiskaart-agrarische-bedrijfssituatie-2021
   - Gerelateerde documenten:
     - Woo-besluit (04-05-2023)
     - Staatscourant bekendmaking 2023/4842
     - Privacy Impact Assessment
     - Juridisch advies

#### Beleidsthema's (3)
1. **Mobiliteitsvisie Flevoland 2030**
   - Vakgebied: Mobiliteit
   - Cyclus: Vaststelling
   
2. **Energietransitie Strategie**
   - Vakgebied: Duurzaamheid
   - Cyclus: Uitvoering

3. **Circulaire Economie Actieplan**
   - Vakgebied: Economie
   - Cyclus: Voorbereiding

### Documenten (14)

| Titel | Type | Classificatie | Woo-relevant | Domain |
|-------|------|---------------|--------------|---------|
| Projectplan Circulaire Economie Q1 2025 | PDF | Intern | Nee | Project CE |
| Data-analyse Afvalstromen Flevoland 2024 | Excel | Openbaar | Ja | Project CE |
| Raadsvoorstel Circulaire Inkoop | PDF | Openbaar | Ja | Project CE |
| ICT Architectuur Blauwdruk 2025 | PDF | Intern | Nee | Project DT |
| Business Case Digitale Dienstverlening | Word | Intern | Nee | Project DT |
| Subsidieaanvraag Groene Energie BV | PDF | Intern | Nee | Zaak SUB |
| Advies Subsidieregeling Duurzame Energie | PDF | Intern | Nee | Zaak SUB |
| Aanvraag Omgevingsvergunning Windturbines | PDF | Openbaar | Ja | Zaak OMV |
| MER Windturbines Dronten | PDF | Openbaar | Ja | Zaak OMV |
| Woo-verzoek Windpark Communicatie | PDF | Openbaar | Ja | Zaak Woo |
| Inventarisatie Woo-documenten Windpark | Excel | Intern | Nee | Zaak Woo |
| Mobiliteitsvisie Flevoland 2030 - Concept | PDF | Openbaar | Ja | Beleid MOB |
| Verkeerscijfers Flevoland 2020-2024 | CSV | Openbaar | Ja | Beleid MOB |
| Energietransitie Strategie 2025-2035 | PDF | Openbaar | Ja | Beleid EN |

### Apps (8)

1. **Data Explorer** - Data analyse en visualisatie
2. **Document Generator** - Documenten met auto-metadata
3. **Stakeholder Mapper** - Netwerk visualisatie
4. **Compliance Checker** - Woo/AVG/Archivering check
5. **Timeline Viewer** - Chronologisch overzicht
6. **Collaboration Hub** - Chat en samenwerking
7. **GEO Visualizer** - Geografische weergave
8. **Subsidie Calculator** - Subsidieberekeningen

### Stakeholders (5)
- Groene Energie BV (bedrijf)
- Circulair Nederland (kennispartner)
- Stichting Natuur Flevoland (belangenorganisatie)
- Familie Smit (burger)
- WindPower Nederland BV (bedrijf)

## üîç Nuttige Query's

### 1. Bekijk alle projecten met documenten
```sql
SELECT 
    id.name as project,
    p.budget,
    p.project_phase,
    u.name as projectleider,
    COUNT(io.id) as aantal_documenten
FROM information_domains id
JOIN projects p ON id.id = p.id
JOIN users u ON id.owner_user_id = u.id
LEFT JOIN information_objects io ON id.id = io.domain_id
WHERE id.type = 'project'
GROUP BY id.name, p.budget, p.project_phase, u.name;
```

### 2. Alle Woo-relevante documenten
```sql
SELECT 
    io.title,
    io.classification,
    id.name as domein,
    id.type as domein_type,
    u.name as auteur
FROM information_objects io
JOIN information_domains id ON io.domain_id = id.id
JOIN users u ON io.created_by = u.id
WHERE io.is_woo_relevant = true
ORDER BY io.created_at DESC;
```

### 3. Zaken met stakeholders
```sql
SELECT 
    c.case_number,
    c.case_type,
    c.subject,
    s.name as stakeholder,
    ds.role
FROM cases c
JOIN information_domains id ON c.id = id.id
JOIN domain_stakeholders ds ON id.id = ds.domain_id
JOIN stakeholders s ON ds.stakeholder_id = s.id
ORDER BY c.case_number;
```

### 4. Meest actieve gebruikers
```sql
SELECT 
    u.name,
    d.name as afdeling,
    COUNT(DISTINCT uau.app_id) as apps_gebruikt,
    SUM(uau.usage_count) as totaal_gebruik
FROM users u
LEFT JOIN departments d ON u.department_id = d.id
LEFT JOIN user_app_usage uau ON u.id = uau.user_id
GROUP BY u.name, d.name
ORDER BY SUM(uau.usage_count) DESC NULLS LAST;
```

### 5. Context-rijke view van een domein
```sql
SELECT 
    id.name as domein,
    id.type,
    id.status,
    u.name as eigenaar,
    o.name as organisatie,
    COUNT(DISTINCT io.id) as documenten,
    COUNT(DISTINCT ds.stakeholder_id) as stakeholders,
    COUNT(DISTINCT dr.to_domain_id) as gerelateerde_domeinen
FROM information_domains id
JOIN users u ON id.owner_user_id = u.id
JOIN organizations o ON id.organization_id = o.id
LEFT JOIN information_objects io ON id.id = io.domain_id
LEFT JOIN domain_stakeholders ds ON id.id = ds.domain_id
LEFT JOIN domain_relations dr ON id.id = dr.from_domain_id
WHERE id.name = 'Circulaire Economie Flevoland 2025'
GROUP BY id.name, id.type, id.status, u.name, o.name;
```

### 6. Compliance check: documenten zonder bewaartermijn
```sql
SELECT 
    io.title,
    io.object_type,
    id.name as domein,
    io.classification,
    io.created_at
FROM information_objects io
JOIN information_domains id ON io.domain_id = id.id
WHERE io.retention_period IS NULL
    AND io.classification != 'openbaar'
ORDER BY io.created_at DESC;
```

### 7. App aanbevelingen voor gebruiker
```sql
-- Voor Maria Jansen
SELECT 
    a.name as app,
    a.description,
    COALESCE(uau.usage_count, 0) as eerder_gebruikt,
    uau.last_used_at
FROM apps a
LEFT JOIN user_app_usage uau ON a.id = uau.app_id 
    AND uau.user_id = 'd0000000-0000-0000-0000-000000000001'
WHERE 'beleid' = ANY(a.relevant_for_domain_types)
   OR 'project' = ANY(a.relevant_for_domain_types)
ORDER BY COALESCE(uau.usage_count, 0) DESC, a.name;
```

### 8. Audit trail van een domein
```sql
SELECT 
    al.timestamp,
    u.name as gebruiker,
    al.action,
    al.object_type,
    io.title as object_naam
FROM audit_log al
JOIN users u ON al.user_id = u.id
LEFT JOIN information_objects io ON al.object_id = io.id
WHERE al.domain_id = 'e0000000-0000-0000-0000-000000000001'
ORDER BY al.timestamp DESC
LIMIT 20;
```

### 9. Business rules die van toepassing zijn
```sql
SELECT 
    br.rule_name,
    br.rule_category,
    br.legal_basis,
    br.applies_to_domain_types,
    br.applies_to_object_types
FROM business_rules br
WHERE br.active = true
    AND 'document' = ANY(br.applies_to_object_types)
ORDER BY br.rule_category, br.rule_name;
```

### 10. Netwerk analyse: gerelateerde domeinen
```sql
WITH RECURSIVE domain_network AS (
    -- Start domain
    SELECT 
        id.id,
        id.name,
        id.type,
        0 as depth
    FROM information_domains id
    WHERE id.name = 'Circulaire Economie Flevoland 2025'
    
    UNION
    
    -- Gerelateerde domeinen
    SELECT 
        id.id,
        id.name,
        id.type,
        dn.depth + 1
    FROM information_domains id
    JOIN domain_relations dr ON id.id = dr.to_domain_id
    JOIN domain_network dn ON dr.from_domain_id = dn.id
    WHERE dn.depth < 2
)
SELECT 
    depth,
    name,
    type
FROM domain_network
ORDER BY depth, type, name;
```

## üß™ Test Scenario's

### Scenario 1: Maria werkt aan Project Circulaire Economie
```sql
-- 1. Login als Maria
SELECT * FROM users WHERE email = 'maria.jansen@flevoland.nl';

-- 2. Haal project context op
SELECT * FROM v_enriched_information_objects 
WHERE domain_name = 'Circulaire Economie Flevoland 2025';

-- 3. Welke apps worden aanbevolen?
-- (zie query 7 hierboven)

-- 4. Log app gebruik
INSERT INTO user_app_usage (user_id, app_id, domain_id, usage_count)
VALUES (
    'd0000000-0000-0000-0000-000000000001',
    (SELECT id FROM apps WHERE name = 'Data Explorer'),
    'e0000000-0000-0000-0000-000000000001',
    1
)
ON CONFLICT (user_id, app_id, domain_id) 
DO UPDATE SET usage_count = user_app_usage.usage_count + 1;
```

### Scenario 2: Jan beoordeelt Woo-verzoek
```sql
-- 1. Haal Woo-zaak op
SELECT * FROM cases WHERE case_number = 'Woo-2025-0008';

-- 2. Bekijk alle documenten in deze zaak
SELECT * FROM v_enriched_information_objects
WHERE domain_name = 'Woo-verzoek Windpark Communicatie';

-- 3. Check welke documenten Woo-relevant zijn
SELECT 
    title,
    is_woo_relevant,
    classification,
    privacy_level
FROM information_objects
WHERE domain_id = 'e0000000-0000-0000-0000-000000000014';

-- 4. Gebruik Compliance Checker app
-- (registreer in audit_log en user_app_usage)
```

### Scenario 3: Sophie analyseert data
```sql
-- 1. Zoek alle datasets
SELECT * FROM information_objects 
WHERE object_type = 'data' 
    AND mime_type IN ('text/csv', 'application/vnd.ms-excel');

-- 2. Open Data Explorer
-- 3. Filter op project
SELECT * FROM v_enriched_information_objects
WHERE domain_type = 'project' 
    AND object_type IN ('data', 'document')
    AND tags && ARRAY['data', 'analyse', 'statistiek'];
```

### Scenario 4: Woo-verzoek Behandeling (Real-world voorbeeld)

**Context**: Behandeling van het Woo-verzoek voor Basiskaart Agrarische Bedrijfssituatie 2021

**Stap 1: Ontvangst Woo-verzoek**
```sql
-- Registreer nieuw Woo-verzoek als zaak
INSERT INTO cases (
    domain_id, 
    case_type, 
    case_number, 
    description,
    status
) VALUES (
    'e0000000-0000-0000-0000-000000000012',
    'Woo-verzoek',
    'Woo-2023-0194',
    'Verzoek om openbaarmaking Basiskaart Agrarische Bedrijfssituatie 2021 van journalisten',
    'in_behandeling'
);

-- Link stakeholders
INSERT INTO stakeholders (type, name, contact_info, role)
VALUES 
    ('organization', 'Ministerie van LNV', '{"role": "verantwoordelijk"}', 'primary_contact'),
    ('organization', 'RVO', '{"role": "uitvoerend"}', 'processor'),
    ('external', 'NRC/FTM/Omroep Gelderland', '{"role": "verzoekers"}', 'requester'),
    ('group', 'Agrarische Sector', '{"role": "derde-belanghebbenden"}', 'affected_party');
```

**Stap 2: AI-analyse van verzoek**
```sql
-- AI genereert metadata suggesties
SELECT * FROM ai_metadata_suggestions
WHERE information_object_id = (
    SELECT id FROM information_objects 
    WHERE title LIKE '%Basiskaart Agrarische%'
)
AND suggestion_type IN ('classification', 'compliance_check');

-- Resultaat:
-- - Woo-relevant: YES (99% confidence)
-- - AVG impact: HIGH (privacy assessment required)
-- - Bewaartermijn: PERMANENT (archiefwaardig)
-- - Publicatieplicht: ACTIEF
```

**Stap 3: Compliance checks**
```sql
-- Check welke business rules van toepassing zijn
SELECT br.*, re.execution_result
FROM business_rules br
LEFT JOIN rule_executions re ON br.id = re.rule_id
WHERE br.rule_type IN ('woo_classification', 'privacy_protection', 'retention_policy')
    AND br.is_active = true;

-- Automatische acties:
-- 1. DPIA getriggerd (Privacy Impact Assessment)
-- 2. Juridisch advies aangevraagd
-- 3. Bekendmaking Staatscourant ingepland
-- 4. Termijn bewaking geactiveerd (4 weken standaard)
```

**Stap 4: Dataset anonimisering**
```sql
-- Markeer persoonsgevoelige velden voor anonimisering
UPDATE information_objects
SET metadata = jsonb_set(
    metadata,
    '{privacy_fields}',
    '["naam_bedrijf", "adres_eigenaar", "contactgegevens"]'::jsonb
)
WHERE title = 'Basiskaart Agrarische Bedrijfssituatie 2021';

-- Log beslissing
INSERT INTO audit_log (
    user_id,
    action,
    entity_type,
    entity_id,
    details
) VALUES (
    'd0000000-0000-0000-0000-000000000002', -- Jan Bakker (juridisch)
    'PRIVACY_DECISION',
    'information_object',
    (SELECT id FROM information_objects WHERE title LIKE '%Basiskaart%'),
    '{"decision": "anonimize", "fields": ["naam_bedrijf", "adres"], "reason": "AVG art. 6"}'::jsonb
);
```

**Stap 5: Publicatie**
```sql
-- Update document status naar openbaar
UPDATE information_objects
SET 
    woo_classification = 'openbaar',
    is_woo_relevant = true,
    published_date = '2025-10-07',
    access_level = 'public',
    metadata = metadata || jsonb_build_object(
        'uuid', '140b872e-26a2-433e-96d5-3d74f7fa981d',
        'publication_url', 'https://www.rijksoverheid.nl/documenten/publicaties/2025/10/07/...',
        'open_data_license', 'CC0',
        'reuse_allowed', true
    )
WHERE title = 'Basiskaart Agrarische Bedrijfssituatie 2021';

-- Link gerelateerde documenten
INSERT INTO domain_relations (source_domain_id, target_domain_id, relation_type)
VALUES
    -- Woo-besluit
    ((SELECT id FROM information_domains WHERE name LIKE '%Basiskaart%'),
     (SELECT id FROM information_domains WHERE name = 'Woo-besluit 04-05-2023'),
     'has_decision'),
    -- Staatscourant bekendmaking
    ((SELECT id FROM information_domains WHERE name LIKE '%Basiskaart%'),
     (SELECT id FROM information_domains WHERE name = 'Staatscourant 2023/4842'),
     'announced_in');
```

**Stap 6: Controleer volledige tijdlijn**
```sql
-- Bekijk alle stappen in het proces
SELECT 
    al.action,
    al.created_at,
    u.name as user,
    al.details->>'decision' as decision
FROM audit_log al
JOIN users u ON al.user_id = u.id
WHERE al.entity_type = 'information_object'
    AND al.entity_id = (SELECT id FROM information_objects WHERE title LIKE '%Basiskaart%')
ORDER BY al.created_at;

-- Resultaat toont volledige traceerbaarheid:
-- 2023-02-14: Woo-verzoek ontvangen
-- 2023-02-15: DPIA gestart
-- 2023-03-12: Staatscourant bekendmaking
-- 2023-04-20: Bezwaartermijn verlopen
-- 2023-05-04: Woo-besluit genomen
-- 2025-10-07: Dataset gepubliceerd
```

**Lessons learned uit dit scenario**:
- ‚úÖ Volledige compliance met Woo door automatische detectie
- ‚úÖ AVG-waarborgen door gedocumenteerde DPIA en anonimisering
- ‚úÖ Transparantie door complete audit trail
- ‚úÖ Effici√´ntie door AI-suggesties (metadata, classificatie)
- ‚úÖ Herbruikbare data door Open Data licentie

## üîê Authenticatie (voor API calls)

Voor de API endpoints heb je een token nodig. In de testdata kun je user IDs gebruiken als tokens (simpele demo setup):

```bash
# Maria's token
export TOKEN="d0000000-0000-0000-0000-000000000001"

# API call voorbeeld
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:8000/context/e0000000-0000-0000-0000-000000000001
```

## üìà Statistieken

- **Organisaties**: 5
- **Afdelingen**: 8
- **Gebruikers**: 8
- **Rollen**: 5
- **Informatiedomeinen**: 11 (4 projecten, 4 zaken, 3 beleid)
- **Documenten**: 14
- **Apps**: 8
- **Stakeholders**: 5
- **Business Rules**: 3
- **Domain Relaties**: 5
- **Audit Log Entries**: 6+

## üéØ Belangrijke UUID's

### Gebruikers
- Maria Jansen: `d0000000-0000-0000-0000-000000000001`
- Jan Bakker: `d0000000-0000-0000-0000-000000000002`
- Sophie de Vries: `d0000000-0000-0000-0000-000000000003`

### Domeinen
- Project Circulaire Economie: `e0000000-0000-0000-0000-000000000001`
- Project Digitale Transformatie: `e0000000-0000-0000-0000-000000000002`
- Zaak Subsidie: `e0000000-0000-0000-0000-000000000011`
- Zaak Woo-verzoek: `e0000000-0000-0000-0000-000000000014`
- Beleid Mobiliteitsvisie: `e0000000-0000-0000-0000-000000000021`

## üöÄ Next Steps

1. Test de API endpoints met verschillende gebruikers
2. Probeer de context-aware zoekfunctie
3. Bekijk de automatische app aanbevelingen
4. Test de compliance regelset
5. Voeg eigen testdata toe
6. Experimenteer met de AI metadata suggesties
